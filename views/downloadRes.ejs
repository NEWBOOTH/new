<%-include ('partials/header') -%>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
     
   
      body {
        background: #111111;
      }
      a {
        text-decoration: none;
        
      }
    
      a,.not,h1 {
        color: #fb422c;
      }
    
    
    .one {
      display: flex;
      color: #fb422c;
    }
    .list-grou {
      background: #111111;
  
    --bs-list-group-color: var(--bs-body-color);
   
    --bs-list-group-border-color: var(--bs-border-color);
    --bs-list-group-border-width: var(--bs-border-width);
    --bs-list-group-border-radius: var(--bs-border-radius);
    --bs-list-group-item-padding-x: 1rem;
    --bs-list-group-item-padding-y: 0.5rem;
    --bs-list-group-action-color: var(--bs-secondary-color);
    --bs-list-group-action-hover-color: var(--bs-emphasis-color);
    --bs-list-group-action-hover-bg: var(--bs-tertiary-bg);
    --bs-list-group-action-active-color: var(--bs-body-color);
    --bs-list-group-action-active-bg: var(--bs-secondary-bg);
    --bs-list-group-disabled-color: var(--bs-secondary-color);
    --bs-list-group-disabled-bg: var(--bs-body-bg);
    --bs-list-group-active-color: #fff;
    --bs-list-group-active-bg: #0d6efd;
    --bs-list-group-active-border-color: #0d6efd;
    display: flex;
    flex-direction: column;
    padding-left: 0;
    margin-bottom: 0;
    border-radius: var(--bs-list-group-border-radius);
    }
    </style>
</head>
<body>
 <div class=" h-600">
  <div class=" col-">
    <h1 class="cardtitle"><%= series.title %></h1>
    <% if (series.background) { %>
      <img src="<%= series.background %>" alt="<%= series.title %> Poster" class="img-fluid m-5 p-5">
    <% } %>
    
      <% if (series.overview) { %>
        <h1>OVERVIEW: </h1> <p><%= series.overview %></p>
   <%   } %>
    
   </div>
   
   <div>
    <% if (series.length > 0) { %>
      <h4>Trailer</h4>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/<%= series.videos.results[0].key %>" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
      <% } %>

   </div>
 </div>
<h4>Seasons</h4>

<ul class="nav three nav-pills" id="seasonTabs" role="tablist">
    <% series.seasons.forEach((season, index) => { %>
      <li class="nav-item" role="presentation">
        <a class= "nav-link <%= index === 0 ? 'active' : '' %>" 
           id="season-tab-<%= index %>" 
           href="#season-<%= index %>" 
           role="tab" 
           aria-controls="season-<%= index %>" 
           aria-selected="<%= index === 0 ? 'true' : 'false' %>">
         <P> Season <%= season.season %></P>
        </a>
      </li>
    <% }); %>
</ul>

<div class="tab-content mt-3 three" id="seasonTabContent">
    <% series.seasons.forEach((season, index) => { %>
      <div class="tab-pane fade <%= index === 0 ? 'show active' : '' %>" 
           id="season-<%= index %>" 
           role="tabpanel" 
           aria-labelledby="season-tab-<%= index %>">
        <% if (season.episodes && season.episodes.length > 0) { %>
          <ul class="list-grou">
            <% season.episodes.forEach((episode) => { %>
              <li class="list-group-item">
                <a href="/res/series/<%= series.id %>/<%= season.season %>/<%= episode.episode %>">
                  <h4 class="two">Episode <%= episode.episode %>: <%= episode.title %></h4>
                
                <div class="justify-content-end one"><button  class="btn btn-primary justify-content-end">â‡©</button></div>
                </a>
              </li>
            <% }); %>
          </ul>
        <% } else { %>
          <p><a href="#">NO FILE</a>.</p>
        <% } %>
      </div>
    <% }); %>
</div>
<%-include ('partials/footer') -%>
<script>
  // JavaScript code to handle tab switching goes here
  const seasonLinks = document.querySelectorAll('#seasonTabs a');

  seasonLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault(); // Prevent default link behavior
      const targetId = this.getAttribute('href'); // Get the target div's ID
      const activeTab = document.querySelector('.nav-link.active');
      activeTab.classList.remove('active'); //remove active class from old tab
      this.classList.add('active'); // Add active class to clicked tab
      const targetTab = document.querySelector(targetId);
      const activeTabContent = document.querySelector('.tab-pane.active');
      activeTabContent.classList.remove('show', 'active');
      targetTab.classList.add('show', 'active');
    });
  });
</script>

</body>
</html>

